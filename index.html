<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Card Collector Battle</title>
  <link rel="stylesheet" href="styles.css">
  <script src="DragDropTouch.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

</head>
<body>
  <div id="game-container">

      <div id="turn-phase-area">
        <div class="life-total">Your Life: <span id="player-life">20</span></div>
        <div id="turn-phase">
          <div id="turn-phase-2">
            <div class="phase-indicator">

              <div id="turn-phase-inner">
                <span id="current-phase">Draw</span>
                <button id="next-phase">Next Phase</button>
              </div>
              <span id="turn-indicator"></span>
            </div>
            <div class="phase-progress">
              <div class="phase-step" data-phase="draw">Draw</div>
              <div class="phase-step" data-phase="play">Play</div>
              <div class="phase-step" data-phase="attack">Attack</div>
              <div class="phase-step" data-phase="end">End</div>
            </div>
          </div>
          <button id="discard-button">Complete Discard</button>
          <span id="discard-text"></span>
        </div>
        <div class="life-total">
          Their Life: <span id="opponent-life">20</span>
        </div>
      </div>
      <div id="player-area">
        <div class="player-info">
          <div>
            <h2>Your Zone</h2>
            Deck size: <span id="player-deck-size">40</span>
          </div>

          <div id="player-discard-pile" class="discard-pile">Discard Pile</div>
          <div id="player-exile-pile" class="exile-pile">Exile Pile</div>
        </div>
        <div id="player-field" class="field"></div>

        <div id="player-hand" class="hand"></div>
      </div>

      <div id="opponent-area">
        <div class="player-info">
          <div>
            <h2>Opponent's Zone</h2>
            Deck size: <span id="opponent-deck-size">40</span>
          </div>

          <div id="opponent-discard-pile" class="discard-pile">Discard Pile</div>
          <div id="opponent-exile-pile" class="exile-pile">Exile Pile</div>
        </div>
        <div id="opponent-field" class="field">
          <button id="direct-attack-button">Attack Directly</button>
        </div>

        <div id="opponent-hand" class="hand"></div>
      </div>

    <div id="battle-log-area">
      <div id="sticky">
        <div id="win-tracker">
          <div id="player-wins-display">Your Wins: <span id="player-wins">0</span></div>
          <div id="opponent-wins-display">Opponent Wins: <span id="opponent-wins">0</span></div>
        </div>
        <div id="battle-log"></div>
        <div id="controls-area">
          <button id="reset-button">Reset Round</button>
          <button id="full-reset-button">Reset Game</button>
          <button id="help-button">Help</button>
        </div>
      </div>
    </div>

  </div>

  <div id="turn-change-popup">
    Your Turn
  </div>

  <div id="spell-popup">
    Spell text here
  </div>

  <div id="help-modal">
    <div class="help-modal-content">
      <span class="close-button">&times;</span>
      <h2>Game Help</h2>
        <p>Welcome to Card Collector Battle!</p>
        <h3><b>Objective:</b> Reduce the opponent's life to 0.</h3>
        <h3>Game Phases:</h3>
        <ul>
            <li><b>Draw Phase:</b> Draw a card from your deck.</li>
            <li><b>Play Phase:</b> Play cards from your hand onto the field. You can only play one card per turn unless a card effect says otherwise (<b>GO AGAIN</b>).</li>
            <li><b>Attack Phase:</b> Attack with cards on your field. You must select your card then your opponent's card. If they have no cards, OR if your card has <b>Evasive</b>, you may attack their life directly.</li>
            <li><b>End Phase:</b> End your turn. Card abilities trigger at the end of the turn. Then discard to 7 cards in hand.</li>
        </ul>
        <h3>Card Types:</h3>
        <ul>
            <li><b>Creatures:</b> Cards with Power/Defense stats. They can attack and block.</li>
            <li><b>Spells:</b> Cards with one-shot effects. Played directly from hand and then discarded.</li>
            <li><b>Tokens:</b> Creatures generated by other cards. They come with one random effect.</li>
            <li><b>Tribute Creatures:</b> Extremely powerful creatures that require you to sacrifice two of your creatures to play them.</li>
        </ul>
        <h3>Keywords:</h3>
        <ul>
            <li><b>Evasive:</b> Can attack the opponent directly even if they have field cards.</li>
            <li><b>Trample:</b> If this card's attack power is greater than the defense of the card it is attacking, the excess damage is dealt to the opponent.</li>
            <li><b>Go Again:</b> Allows you to play an additional card in the current phase.</li>
            <li><b>Leeching:</b> When this creature deals combat damage, you gain life equal to the damage dealt.</li>
            <li><b>Shield:</b> Prevents the first instance of damage each turn.</li>
        </ul>
        <h3>Card Rarities (From weakest to strongest):</h3>
        <ul>
            <li><b>Common</b></li>
            <li><b>Rare</b></li>
            <li><b>Epic</b></li>
            <li><b>Legendary</b></li>
            <li><b>Holy</b> (rarest and most powerful)</li>
        </ul>
        <h3>Activated Abilities:</h3>
        <p>Some cards have activated abilities that can be used during your Play Phase. These abilities may have a cost, so be sure you want to use them!</p>
        <h3>Deck Building:</h3>
        <p>Each time a player loses, they get new cards to add to their deck! Switch cards from the two sections by dragging them back and forth. Your final deck must be 40 cards.</p>
        <h3>Winning the Game:</h3>
        <p>The first player to win five rounds wins the entire game. After a full game win, both player's decks are completely reset.</p>
    </div>
  </div>

  <div id="upgrade-modal" style="display: none;">
    <div class="upgrade-modal-content">
      <h2>Upgrade Your Deck!</h2>
      <p>Choose cards to upgrade your deck. Your deck must contain exactly 40 cards.</p>
      <div class="upgrade-grid">
        <div class="deck-section">
          <h3>Your Deck (<span id="deck-count">40</span> cards)</h3>
          <div id="current-deck" class="card-grid"></div>
        </div>
        <div class="new-cards-section">
          <h3>New Cards</h3>
          <div id="new-cards" class="card-grid"></div>
        </div>
      </div>
      <div class="upgrade-controls">
        <button id="ready-button" disabled>Ready!</button>
        <p id="deck-warning"></p>
      </div>
    </div>
  </div>

  <div id="target-selection-popup">
    Select a target card for effect.
  </div>

  <div id="discard-pile-modal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="close-discard-modal">&times;</span>
      <h2>Discard Pile</h2>
      <div id="discard-pile-cards" class="card-grid"></div>
    </div>
  </div>

  <div id="exile-pile-modal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="close-exile-modal">&times;</span>
      <h2>Exile Pile</h2>
      <div id="exile-pile-cards" class="card-grid"></div>
    </div>
  </div>

  <div id="deck-manipulation-modal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="close-deck-manipulation-modal">&times;</span>
      <h2>Rearrange Deck</h2>
      <p id="deck-manipulation-instructions">Drag and drop the cards to rearrange your deck. "Top" indicates the first card to draw.</p>
      <div id="deck-manipulation-cards" class="deck-manipulation-cards"></div>
      <div class="upgrade-controls">
        <button id="close-deck-manipulation-modal-button">Done</button>
      </div>
    </div>
  </div>

  <div id="reveal-popup">
    <div id="reveal-popup-content">
      <span class="close-button" id="close-reveal-popup">&times;</span>
      <h2>Revealed Card</h2>
      <div id="reveal-card"></div> 
    </div>
  </div>

  <div id="game-message-popup">
    <h2 id="game-message-text">Game Message</h2>
  </div>

  <script src="game.js"></script>
</body>
</html>